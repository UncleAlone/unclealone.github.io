<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-01-30 Sat 11:03 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Notes for Week 1</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Desmond Wang" />
<link rel="stylesheet" type="text/css" href="../assets/css/org_ez.css" />
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/atom-one-dark.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">Notes for Week 1</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org841801c">1. Python Memory Model</a>
<ul>
<li><a href="#orgd51189a">1.1. Objects</a></li>
</ul>
</li>
<li><a href="#org2ae80e1">2. For Loop Gotcha</a></li>
<li><a href="#org642fc1b">3. Function Calls and Parameters</a></li>
<li><a href="#org57d7f36">4. Testing</a>
<ul>
<li><a href="#orge7894ad">4.1. Doctests</a></li>
<li><a href="#org4223c50">4.2. Unit Tests</a></li>
<li><a href="#org10de74d">4.3. Test Case Properties</a></li>
<li><a href="#orgd4f9b2b">4.4. Property Tests: Describing Behaviour</a></li>
<li><a href="#orgacb3e15">4.5. Thoughts on testing</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org841801c" class="outline-2">
<h2 id="org841801c"><span class="section-number-2">1</span> Python Memory Model</h2>
<div class="outline-text-2" id="text-1">
<p>
<b>Objects</b> and <b>variable</b> are stored in the memory.
</p>
</div>
<div id="outline-container-orgd51189a" class="outline-3">
<h3 id="orgd51189a"><span class="section-number-3">1.1</span> Objects</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>Objects contains <b>unique ID</b>, type and value</li>
<li>Object of immetable type (e.g. integer, boolean, string) cannot change value</li>
<li>Object of mutable type (e.g. list, dictionary) can change value</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org2ae80e1" class="outline-2">
<h2 id="org2ae80e1"><span class="section-number-2">2</span> For Loop Gotcha</h2>
<div class="outline-text-2" id="text-2">
<p>
What's wrong here?
</p>
<div class="org-src-container">
<pre>
<code class="python">lst = [1, 2, 3]
for item in lst:
    item = item + 1
print(lst)
</code>
</pre>
</div>

<pre class="example">
[1, 2, 3]
</pre>


<p>
In fact, <code>item = item + 1</code> cannot increase every elenment in the <code>lst</code>
TODO the picture
</p>
</div>
</div>

<div id="outline-container-org642fc1b" class="outline-2">
<h2 id="org642fc1b"><span class="section-number-2">3</span> Function Calls and Parameters</h2>
<div class="outline-text-2" id="text-3">
<p>
When a function is called:
</p>
<ul class="org-ul">
<li>Each argument is evaluated to the id of an object. That id is assigned to the corresponding parameter
<ul class="org-ul">
<li>Argument passing is like an assignment statement</li>
</ul></li>
<li>Then the function body is executed</li>
</ul>

<div class="org-src-container">
<pre>
<code class="python">def say_hello(n: int, word: str) -&gt; None:
    """What does this function do?"""
    output = word * n
    s = output

if __name__ == '__main__':
    count = 13
    word = 'Hello'
    print(word)
    say_hello(count, word)
    print(word)
</code>
</pre>
</div>

<pre class="example">
Hello
Hello
</pre>
</div>
</div>

<div id="outline-container-org57d7f36" class="outline-2">
<h2 id="org57d7f36"><span class="section-number-2">4</span> Testing</h2>
<div class="outline-text-2" id="text-4">
<p>
One way to test our codes:
</p>
<ul class="org-ul">
<li>Call your function at the Python shell</li>
<li>Look at what it returns</li>
<li>Judge whether your function is doing the right thing</li>
<li>Repeat</li>
</ul>
</div>
<div id="outline-container-orge7894ad" class="outline-3">
<h3 id="orge7894ad"><span class="section-number-3">4.1</span> Doctests</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Doctests are useful for showing users what the function does
</p>
<div class="org-src-container">
<pre>
<code class="python">def insert(lst: List[int], n1: int, n2: int) -&gt; None:
    """
    After each occurrence of &lt;n1&gt; in &lt;lst&gt;, insert &lt;n2&gt;.
    &gt;&gt;&gt; lst = [5, 1, 2, 1, 6]
    &gt;&gt;&gt; insert(lst, 1, 99)
    &gt;&gt;&gt; lst
    [5, 1, 99, 2, 1, 99, 6]
    """
    ...

if __name__ == "__main__":
    import doctest
    doctest.testmod()
</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4223c50" class="outline-3">
<h3 id="org4223c50"><span class="section-number-3">4.2</span> Unit Tests</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li>Using the Python <code>pytest</code> module to do our unit testing</li>
<li>Each test case should be in a function whose name starts with test</li>
<li>Use <code>assert</code> to state what should be true</li>
</ul>
<div class="org-src-container">
<pre>
<code class="python">def test_sample() -&gt; None:
    input_list = [5, 1, 2, 1, 6]
    insert_after(input_list, 1, 99)
    execpted = [5, 1, 99, 2, 1, 99, 6]
    assert input_list == execpted
</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org10de74d" class="outline-3">
<h3 id="org10de74d"><span class="section-number-3">4.3</span> Test Case Properties</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Since there are zillions of test cases. It is very hard to test them all.
Focus on properties of the test cases and based on what a function or method does.
</p>
<div class="org-src-container">
<pre>
<code class="python">def insert(lst: List[int], n1: int, n2: int) -&gt; None:
    """
    After each occurrence of &lt;n1&gt; in &lt;lst&gt;, insert &lt;n2&gt;.
    &gt;&gt;&gt; lst = [5, 1, 2, 1, 6]
    &gt;&gt;&gt; insert(lst, 1, 99)
    &gt;&gt;&gt; lst
    [5, 1, 99, 2, 1, 99, 6]
    """
</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd4f9b2b" class="outline-3">
<h3 id="orgd4f9b2b"><span class="section-number-3">4.4</span> Property Tests: Describing Behaviour</h3>
<div class="outline-text-3" id="text-4-4">
<p>
Generating random inputs and check the expected output by describing properties of the desired function behaviour and check these properties on a huge number of random inputs
In Python we use the <code>hypothesis</code> module:
<i><b>Inputs:</b></i>
</p>
<ul class="org-ul">
<li>In a standard test, we specify a specific input, like <code>[3, 6, 4, 42, 9]</code></li>
<li>In a hypothesis test, we specify a property of inputs, like “list of integers”</li>
</ul>
<p>
<i><b>Output:</b></i>
</p>
<ul class="org-ul">
<li>In a standard test, we specify the output, like <code>6</code></li>
<li>In a hypothesis test, we specify a property of outputs, like “an integer in the list”</li>
</ul>
<div class="org-src-container">
<pre>
<code class="python">from typing import List
from hypothesis import given
from hypothesis.strategies import integers, lists
from insert import insert

@given(lists(integers()), integers(), integers())
def test_returns_none(lst: List[int], n1: int, n2: int) -&gt; None:
    """Test that insert_after always returns None.
    """
    assert insert(lst, n1, n2) is None

@given(lists(integers()), integers(), integers())
def test_new_item_count(lst: List[int], n1: int, n2: int) -&gt; None:
    """Test that the correct number of items is added.
    """
    num_n1_occurrences = lst.count(n1)
    original_length = len(lst)
    insert(lst, n1, n2)

    final_length = len(lst)

    assert final_length - original_length == num_n1_occurrences

if __name__ == '__main__':
    import pytest
    pytest.main(['test_insert_hypothesis.py'])
</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgacb3e15" class="outline-3">
<h3 id="orgacb3e15"><span class="section-number-3">4.5</span> Thoughts on testing</h3>
<div class="outline-text-3" id="text-4-5">
<ul class="org-ul">
<li>Desigining test cases before writing code is a best practice</li>
<li>It is part of test-driven development</li>
<li>Try to break it when testing it</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Desmond Wang</p>
<p class="date">Created: 2021-01-30 Sat 11:03</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
